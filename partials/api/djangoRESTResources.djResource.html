<h1><code ng:non-bindable="">djResource</code>
<div><span class="hint">service in module <code ng:non-bindable="">djangoRESTResources</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="djangorestresources-djresource-page"><p>A factory for generating classes that interact with a Django REST Framework backend.</p>
<p>Identical in operation to AngularJS&#39; ngResource module&#39;s $resource object except for the following:</p>
<ul>
<li>If an isArray=True request receives a JSON <em>object</em> containing a <code>count</code> field (instead of a JS array), assume
that the REST endpoint has <code>paginate_by</code> set. The results are then streamed a page at a time into the promise object
and any success callbacks are deferred until the last page returns successfully.</li>
<li>URLs are assumed to have the trailing slashes, as is the Django way of doing things.</li>
</ul>
<h3 id="description_installation">Installation</h3>
<p>Include <code>angular-django-rest-resource.js</code></p>
<p>Load the module:</p>
<pre><code>   angular.module(&#39;app&#39;, [&#39;djangoRESTResources&#39;]);
</code></pre><p>now you inject djResource into any of your Angular things.</p>
</div></div>
<h2 id="dependencies">Dependencies</h2>
<ul class="dependencies"><li><code ng:non-bindable=""><a href="api/ng.$http">$http</a></code>
</li>
</ul>
<h2 id="usage">Usage</h2>
<div class="usage"><pre class="prettyprint linenums">djResource(url[, paramDefaults][, actions]);</pre>
<h4 id="usage_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>url</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="djangorestresources-djresource-page"><p>A parametrized URL template with parameters prefixed by <code>:</code> as in
<code>/user/:username</code>. If you are using a URL with a port number (e.g.
<code>http://example.com:8080/api</code>), it will be respected.</p>
</div></td></tr><tr><td>paramDefaults <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="djangorestresources-djresource-page"><p>Default values for <code>url</code> parameters. These can be overridden in
<code>actions</code> methods. If any of the parameter value is a function, it will be executed every time
when a param value needs to be obtained for a request (unless the param was overridden).</p>
<p>Each key value in the parameter object is first bound to url template if present and then any
excess keys are appended to the url search query after the <code>?</code>.</p>
<p>Given a template <code>/path/:verb</code> and parameter <code>{verb:&#39;greet&#39;, salutation:&#39;Hello&#39;}</code> results in
URL <code>/path/greet?salutation=Hello</code>.</p>
<p>If the parameter value is prefixed with <code>@</code> then the value of that parameter is extracted from
the data object (useful for non-GET operations).</p>
</div></td></tr><tr><td>actions <div><em>(optional)</em></div></td><td><a href="" class="label type-hint type-hint-object">Object.&lt;Object&gt;</a></td><td><div class="djangorestresources-djresource-page"><p>Hash with declaration of custom action that should extend the
default set of resource actions. The declaration should be created in the format of $http.config</p>
<pre><code>{action1: {method:?, params:?, isArray:?, headers:?, ...},
 action2: {method:?, params:?, isArray:?, headers:?, ...},
 ...}
</code></pre><p>Where:</p>
<ul>
<li><strong><code>action</code></strong> – {string} – The name of action. This name becomes the name of the method on your
resource object.</li>
<li><strong><code>method</code></strong> – {string} – HTTP request method. Valid methods are: <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>,
and <code>JSONP</code>.</li>
<li><strong><code>params</code></strong> – {Object=} – Optional set of pre-bound parameters for this action. If any of the
parameter value is a function, it will be executed every time when a param value needs to be
obtained for a request (unless the param was overridden).</li>
<li><strong><code>url</code></strong> – {string} – action specific <code>url</code> override. The url templating is supported just like
for the resource-level urls.</li>
<li><strong><code>isArray</code></strong> – {boolean=} – If true then the returned object for this action is an array, see
<code>returns</code> section.</li>
<li><strong><code>transformRequest</code></strong> – <code>{function(data, headersGetter)|Array.&lt;function(data, headersGetter)&gt;}</code> –
transform function or an array of such functions. The transform function takes the http
request body and headers and returns its transformed (typically serialized) version.</li>
<li><strong><code>transformResponse</code></strong> – <code>{function(data, headersGetter)|Array.&lt;function(data, headersGetter)&gt;}</code> –
transform function or an array of such functions. The transform function takes the http
response body and headers and returns its transformed (typically deserialized) version.</li>
<li><strong><code>cache</code></strong> – <code>{boolean|Cache}</code> – If true, a default $http cache will be used to cache the
GET request, otherwise if a cache instance built with
<a href="http://docs.angularjs.org/api/ng.$cacheFactory">$cacheFactory</a>, this cache will be used for
caching.</li>
<li><strong><code>timeout</code></strong> – <code>{number}</code> – timeout in milliseconds.</li>
<li><strong><code>withCredentials</code></strong> - <code>{boolean}</code> - whether to to set the <code>withCredentials</code> flag on the
XHR object. See <a href="https://developer.mozilla.org/en/http_access_control#section_5">requests with credentials</a> for more information.</li>
<li><strong><code>responseType</code></strong> - <code>{string}</code> - see
<a href="https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#responseType">requestType</a>.</li>
</ul>
</div></td></tr></tbody></table><h4 id="usage_returns">Returns</h4><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="djangorestresources-djresource-page"><p>A resource &quot;class&quot; object with methods for the default set of resource actions
optionally extended with custom <code>actions</code>. The default set contains these actions:</p>
<pre><code>{ &#39;get&#39;:    {method:&#39;GET&#39;},
  &#39;save&#39;:   {method:&#39;POST&#39;, method_if_field_has_value:[&#39;id&#39;, &#39;PUT&#39;]},
  &#39;update&#39;: {method:&#39;PUT&#39;},
  &#39;query&#39;:  {method:&#39;GET&#39;, isArray:true},
  &#39;remove&#39;: {method:&#39;DELETE&#39;},
  &#39;delete&#39;: {method:&#39;DELETE&#39;} };
</code></pre><p>Calling these methods invoke an <a href="http://docs.angularjs.org/api/ng.$http">$http</a> with the specified http
method, destination and parameters. When the data is returned from the server then the object is an
instance of the resource class. The actions <code>save</code>, <code>remove</code> and <code>delete</code> are available on it
as  methods with the <code>$</code> prefix. This allows you to easily perform CRUD operations (create,
read, update, delete) on server-side data like this:
<pre class="prettyprint linenums">
      var User = djResource('/user/:userId', {userId:'@id'});
      var user = User.get({userId:123}, function() {
        user.abc = true;
        user.$save();
      });
   </pre>
<p>Invoking a djResource object method immediately returns an empty reference (object or array depending
on <code>isArray</code>). Once the data is returned from the server the existing reference is populated with the actual data.</p>
<p>The action methods on the class object or instance object can be invoked with the following
parameters:</p>
<ul>
<li>HTTP GET &quot;class&quot; actions: <code>DjangoRESTResource.action([parameters], [success], [error])</code></li>
<li>non-GET &quot;class&quot; actions: <code>DjangoRESTResource.action([parameters], postData, [success], [error])</code></li>
<li>non-GET instance actions:  <code>instance.$action([parameters], [success], [error])</code></li>
</ul>
<p>The DjangoRESTResource instances and collection have these additional properties:</p>
<ul>
<li><p><code>$then</code>: the <code>then</code> method of a <a href="http://docs.angularjs.org/api/ng.$q">promise</a> derived from the underlying
<a href="http://docs.angularjs.org/api/ng.$http">$http</a> call.</p>
<p>The success callback for the <code>$then</code> method will be resolved if the underlying <code>$http</code> requests
succeeds.</p>
<p>The success callback is called with a single object which is the
<a href="http://docs.angularjs.org/api/ng.$http">http response</a>
object extended with a new property <code>resource</code>. This <code>resource</code> property is a reference to the
result of the resource action — resource object or array of resources.</p>
<p>The error callback is called with the <a href="http://docs.angularjs.org/api/ng.$http">http response</a> object when
an http error occurs.</p>
</li>
<li><p><code>$resolved</code>: true if the promise has been resolved (either with success or rejection);
Knowing if the DjangoRESTResource has been resolved is useful in data-binding.</p>
</li>
</ul>
</div></td></tr></table></div>
</div>
